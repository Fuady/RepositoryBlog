<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Google Trends Visualization using R</title>
  <meta name="author" content="A.M.Fuady" />
  
  
  
  
  <meta name="keywords" content="visualization, ggplot2, gtrendsr, maps">
  
  
  <meta name="description" content="">

  <meta name="generator" content="Hugo 0.59.1" />

  
  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.11.2/css/all.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  
  <link href="/css/animate.css" rel="stylesheet">

  
  
    <link href="/css/style.green.css" rel="stylesheet" id="theme-stylesheet">
  

  
  <link href="/css/custom.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />

  
  <link href="/css/owl.carousel.css" rel="stylesheet">
  <link href="/css/owl.theme.css" rel="stylesheet">

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Angga Fuady Blog">

  
  
  
  
  
  
  
  <meta property="og:locale" content="en_us">
  <meta property="og:site_name" content="Angga Fuady Blog">
  <meta property="og:title" content="Google Trends Visualization using R">
  <meta property="og:type" content="article">
  <meta property="og:url" content="/blog/2019/10/27/2019-10-27-google-trends-visualization-using-r/" />
  <meta property="og:description" content="">
  <meta property="og:image" content="/img/banners/olympics.jpg">
  <meta property="og:image:type" content="image/jpg">
  
  
  
    <meta property="og:image:width" content="5678">
    <meta property="og:image:height" content="3785">
  
  
  <meta property="og:updated_time" content="2019-10-27T00:00:00Z">
  
    
    
    <meta property="article:section" content="R package">
    <meta property="article:tag" content="visualization">
    <meta property="article:tag" content="ggplot2">
    <meta property="article:tag" content="gtrendsr">
    <meta property="article:tag" content="maps">
    
    
    <meta property="article:published_time" content="2019-10-27T00:00:00Z">
    <meta property="article:modified_time" content="2019-10-27T00:00:00Z">
  

  
  <meta name="twitter:card" content="summary_large_image">
  
  <meta name="twitter:title" content="Google Trends Visualization using R">
  
  <meta name="twitter:image" content="/img/banners/olympics.jpg">
  
  <meta name="twitter:description" content="">
  

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="/">
                    <img src="/img/amf_logo_psd.png" alt="Google Trends Visualization using R logo" class="hidden-xs hidden-sm">
                    <img src="/img/amf_logo_small_psd.png" alt="Google Trends Visualization using R logo" class="visible-xs visible-sm">
                    <span class="sr-only">Google Trends Visualization using R - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  
                  
                  <li class="dropdown">
                    
                    <a href="/">Home</a>
                    
                  </li>
                  
                  
                  <li class="dropdown active">
                    
                    <a href="/blog/">Blog</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/about_me">About Me</a>
                    
                  </li>
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Google Trends Visualization using R</h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            <div class="container">

                <div class="row">

                    

                    <div class="col-md-9" id="blog-post">

                        <p class="text-muted text-uppercase mb-small text-right">By <a href="#">A.M.Fuady</a> | October 27, 2019</p>

                        <div id="post-content">
                          


<p>In this post, we will visualize Google Trends search hits using R. We will combine the results of google trends with the world map figure. Here, we extract google search results on <strong>Sea games</strong> from 2004 in the Southeast Asia countries and plot the hits on the map.</p>
<p>First of all, we need some packages. For capturing the google search hits, we use <code>gtrendsR</code>. To get the world map, we use the R package called <code>maps</code>. <code>ggplot2</code> is used for visualizing the map. For installing and loading all packages needed, the code is as follows</p>
<pre class="r"><code># install.packages(&quot;maps&quot;, &quot;ggplot2&quot;, &quot;tidyverse&quot;, &quot;devtools&quot;)
# devtools::install_github(&#39;PMassicotte/gtrendsR&#39;)

library(gtrendsR)
library(maps)
library(ggplot2)
library(tidyverse)</code></pre>
<div id="construct-world-map-and-asean-map" class="section level2">
<h2>Construct World map and ASEAN map</h2>
<p>Here in this section, we will use <code>map_data</code> function from the <code>maps</code> package to extract the longitude and latitude position of each country. First, we get the world map as follows</p>
<pre class="r"><code>global &lt;- map_data(&quot;world&quot;) #World longitude and latitude data 
head(global) #view the data </code></pre>
<pre><code>##        long      lat group order region subregion
## 1 -69.89912 12.45200     1     1  Aruba      &lt;NA&gt;
## 2 -69.89571 12.42300     1     2  Aruba      &lt;NA&gt;
## 3 -69.94219 12.43853     1     3  Aruba      &lt;NA&gt;
## 4 -70.00415 12.50049     1     4  Aruba      &lt;NA&gt;
## 5 -70.06612 12.54697     1     5  Aruba      &lt;NA&gt;
## 6 -70.05088 12.59707     1     6  Aruba      &lt;NA&gt;</code></pre>
<p>Then, we only interested in the country in Southeast Asia, namely: Brunei, Cambodia, Indonesia, Laos, Malaysia, Myanmar, Philippines, Singapore, Thailand, and Vietnam. We use <code>ggplot2</code> to visualize the selected countries.</p>
<pre class="r"><code>AseanMap &lt;- global[which(global$region %in% c(&quot;Brunei&quot;, &quot;Cambodia&quot;, &quot;Indonesia&quot;, &quot;Laos&quot;, &quot;Malaysia&quot;, &quot;Myanmar&quot;, &quot;Philippines&quot;, &quot;Singapore&quot;, &quot;Thailand&quot;, &quot;Vietnam&quot;)),]

ggplot() + 
  geom_polygon(data = AseanMap, aes(x=long, y = lat, group=group), fill = &quot;grey&quot;, color=&quot;black&quot;) +
  theme(legend.position = &quot;none&quot;) +
  coord_fixed(0.8) </code></pre>
<p><img src="/blog/2019-10-27-google-trends-visualization-using-r_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="extracting-search-hits-from-google-trends" class="section level2">
<h2>Extracting search hits from Google Trends</h2>
<p>After constructing maps figure, now its time to extract some information from google trends. Here, we use the <code>gtrendsR</code> package. Specifically, we search a term called <code>Sea Games</code> to see how many hits conducted since the beginning of Google Trend in 2004. If needed, we can search more terms by modifying <code>c(&quot;Sea Games&quot;)</code> into multiple terms, such as <code>c(&quot;Sea Games&quot;, &quot;Olympics&quot;)</code>. We specify <code>time=&quot;all&quot;</code> to capture all hits from 2004, but you can specify a certain date of interest as well. Here we change the column name of <code>region</code>into <code>location</code> to combine datasets.</p>
<pre class="r"><code>SeaGames &lt;- gtrends(c(&quot;Sea Games&quot;), gprop = &quot;web&quot;, time = &quot;all&quot;)

SeaGamesInterestByRegion &lt;- as_tibble(SeaGames$interest_by_country)
SeaGamesInterestByRegion &lt;- SeaGamesInterestByRegion %&gt;% dplyr::mutate(region = stringr::str_to_lower(location))

names(AseanMap)[5] &lt;- c(&quot;location&quot;)</code></pre>
<p>Now, we plot the intensity of search hits by date as follows</p>
<pre class="r"><code>time_trend_seagames = SeaGames$interest_over_time
head(time_trend_seagames)</code></pre>
<pre><code>##         date hits   geo time   keyword gprop category
## 1 2004-01-01    1 world  all Sea Games   web        0
## 2 2004-02-01   &lt;1 world  all Sea Games   web        0
## 3 2004-03-01   &lt;1 world  all Sea Games   web        0
## 4 2004-04-01   &lt;1 world  all Sea Games   web        0
## 5 2004-05-01   &lt;1 world  all Sea Games   web        0
## 6 2004-06-01   &lt;1 world  all Sea Games   web        0</code></pre>
<pre class="r"><code>ggplot(time_trend_seagames, aes(x=date, y=hits) ) +
        geom_line(col=&quot;blue&quot;) + 
        xlab(&#39;Time&#39;) + ylab(&#39;Search Hits&#39;) + 
        theme_bw() +
        theme(legend.title = element_blank(), legend.position=&quot;bottom&quot;, legend.text=element_text(size=12) ) + 
  ggtitle(&quot;Google search interest over time for Sea Games&quot;)</code></pre>
<p><img src="/blog/2019-10-27-google-trends-visualization-using-r_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>We have now two datasets, the maps data <code>AseanMap</code> and the google trends data <code>SeaGames</code>, to combine these two datasets, we use <code>location</code> as a key variable. The code for merging two datasets is given by</p>
<pre class="r"><code>SeaGamesMerged &lt;- merge(AseanMap, SeaGames$interest_by_country, by = &quot;location&quot;)
SeaGamesMerged &lt;- SeaGamesInterestByRegion %&gt;% dplyr::left_join(x = .,  y = AseanMap, by = &quot;location&quot;)</code></pre>
<p>Finally, we can visualize search hits of <code>Sea Games</code> in the Southeast Asia country over time since 2004 as follows</p>
<pre class="r"><code>SeaGamesMerged %&gt;% 
  ggplot(aes(x = long, y = lat)) +
  geom_polygon(aes(group = group, fill =  as.numeric(hits)), 
               colour = &quot;white&quot;) +
  scale_colour_gradientn(colours = terrain.colors(5)) +
  theme_bw() +
  theme(panel.grid.minor = element_blank()) +
  theme(legend.background = element_blank()) +
  theme(legend.key = element_blank()) +
  theme(legend.title = element_blank()) +
  labs(x=&quot;Longitude&quot;, y=&quot;Latitude&quot;) +
  ggtitle(&quot;Google search interest for Sea Games \nin each ASEAN countries&quot;) </code></pre>
<p><img src="/blog/2019-10-27-google-trends-visualization-using-r_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>In this post, we use <code>maps</code> and <code>gtrendsR</code> packages to construct intensity maps of search hits for specific terms, here we use the term “Sea Games”. You can try with several combinations of multiple countries and multiple search terms.</p>
<div id="references" class="section level3">
<h3>References</h3>
<ul>
<li><strong>Photo by Sam Balye on Unsplash</strong></li>
</ul>
</div>
</div>

                        </div>
                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "amfuady" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </div>
                    

                    

                    

                    <div class="col-md-3">

                        

                        

<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
      <h3 class="panel-title">Search</h3>
    </div>

    <div class="panel-body">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" role="search">
            <div class="input-group">
                <input type="search" name="q" class="form-control" placeholder="Search">
                <input type="hidden" name="sitesearch" value="/">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
</div>







<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">Categories</h3>
    </div>

    <div class="panel-body">
        <ul class="nav nav-pills nav-stacked">
            
            
            <li>
                <a href="/categories/data-analysis">data-analysis (2)</a>
            </li>
            
            <li>
                <a href="/categories/how-to">how-to (1)</a>
            </li>
            
            <li>
                <a href="/categories/r-package">r-package (6)</a>
            </li>
            
        </ul>
    </div>

</div>








<div class="panel sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>

    <div class="panel-body">
        <ul class="tag-cloud">
            
            
            <li>
                <a href="/tags/date-time"><i class="fas fa-tags"></i> date-time</a>
            </li>
            
            <li>
                <a href="/tags/dplyr"><i class="fas fa-tags"></i> dplyr</a>
            </li>
            
            <li>
                <a href="/tags/ggplot2"><i class="fas fa-tags"></i> ggplot2</a>
            </li>
            
            <li>
                <a href="/tags/gtrendsr"><i class="fas fa-tags"></i> gtrendsr</a>
            </li>
            
            <li>
                <a href="/tags/install-r"><i class="fas fa-tags"></i> install-r</a>
            </li>
            
            <li>
                <a href="/tags/install-rstudio"><i class="fas fa-tags"></i> install-rstudio</a>
            </li>
            
            <li>
                <a href="/tags/lubridate"><i class="fas fa-tags"></i> lubridate</a>
            </li>
            
            <li>
                <a href="/tags/maps"><i class="fas fa-tags"></i> maps</a>
            </li>
            
            <li>
                <a href="/tags/rvest"><i class="fas fa-tags"></i> rvest</a>
            </li>
            
            <li>
                <a href="/tags/tm"><i class="fas fa-tags"></i> tm</a>
            </li>
            
            <li>
                <a href="/tags/transformation"><i class="fas fa-tags"></i> transformation</a>
            </li>
            
            <li>
                <a href="/tags/twitter"><i class="fas fa-tags"></i> twitter</a>
            </li>
            
            <li>
                <a href="/tags/visualization"><i class="fas fa-tags"></i> visualization</a>
            </li>
            
            <li>
                <a href="/tags/wordcloud"><i class="fas fa-tags"></i> wordcloud</a>
            </li>
            
        </ul>
    </div>

</div>






                        

                    </div>
                    

                    

                </div>
                

            </div>
            
        </div>
        

        <footer id="footer">
    <div class="container">

        

        <div class="col-md-4 col-sm-6">

             
            <h4>Recent posts</h4>

            <div class="blog-entries">
                
                <div class="item same-height-row clearfix">
                    <div class="image same-height-always">
                        <a href="/blog/2019/11/24/2019-11-24-exploratory-data-analysis-premiere-league-fifa20/">
                          
                            <img src="/img/banners/pl.jpg" class="img-responsive" alt="Exploratory data analysis: Premier league FIFA20">
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="/blog/2019/11/24/2019-11-24-exploratory-data-analysis-premiere-league-fifa20/">Exploratory data analysis: Premier league FIFA20</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="image same-height-always">
                        <a href="/blog/2019/11/17/2019-11-17-mining-and-analyzing-tweets-with-r/">
                          
                            <img src="/img/banners/word.jpg" class="img-responsive" alt="Mining and analyzing tweets with R">
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="/blog/2019/11/17/2019-11-17-mining-and-analyzing-tweets-with-r/">Mining and analyzing tweets with R</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="image same-height-always">
                        <a href="/blog/2019/11/10/2019-11-10-scraping-imdb-website-using-rvest/">
                          
                            <img src="/img/banners/movie.jpg" class="img-responsive" alt="Scraping IMDB website using rvest ">
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="/blog/2019/11/10/2019-11-10-scraping-imdb-website-using-rvest/">Scraping IMDB website using rvest </a></h5>
                    </div>
                </div>
                
            </div>

            <hr class="hidden-md hidden-lg">
             

        </div>
        

        

    </div>
    
</footer>







<div id="copyright">
    <div class="container">
        <div class="col-md-12">
            
            <p class="pull-left">Copyright (c) 2019</p>
            
            <p class="pull-right">
              Template by <a href="https://bootstrapious.com/p/universal-business-e-commerce-template">Bootstrapious</a>.
              

              Ported to Hugo by <a href="https://github.com/devcows/hugo-universal-theme">DevCows</a>.
            </p>
        </div>
    </div>
</div>





    </div>
    

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-150402048-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="//maps.googleapis.com/maps/api/js?v=3.exp"></script>

<script src="/js/hpneo.gmaps.js"></script>
<script src="/js/gmaps.init.js"></script>
<script src="/js/front.js"></script>


<script src="/js/owl.carousel.min.js"></script>


  </body>
</html>
